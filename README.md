This is an Intel hex to binary conversion program for Elf/OS. It is called with two filename arguments, the first being the input hex file, and the second being the output file to which the binary copy is written. The processing is done file-to-file without loading all the contents into memory, so there are no limits on the file size that can be processed, although, since only 16-bit files are supported, the output file can never be larger than 64K.

This was written in a way to be about as efficient as possible without playing ttricks with the Elf/OS API and while handling input files with out-of-order or overlapping records properly. It parses data directly out of a sector-sized hread buffer for the input file without copying to any additional line buffer or doing character-by-character subroutine calls. On my 6 Mhz system with disk DMA and filesystem acceleration, it can convert the pico_elfos_032.hex installation file (a 57K input file) in about 20 seconds (producing a 32K output file).

This is an early version and still a work in process. One particular area for more work is due to a limitation in Elf/OS in that when new allocation units are added to a file being written, they are mapped to the file without being cleared first. This results in content from old deleted files being injected into the new file and this shows up in the output file where when the input hex file is sparse (that is, skips addresses and so has "holes"). There does not appear to be a direct way to compensate for this in Elf/OS.

